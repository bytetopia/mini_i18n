/*! minii18n.js v1.0.1 | MIT (c) 2021 dongxing xin <hello@dongxing.xin> | https://github.com/bytetopia/mini_i18n/ */
!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var n;n="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,n.Minii18n=e()}}(function(){function e(e){var n=localStorage.getItem(e);return void 0!=n&&n}function n(e,n){localStorage.setItem(e,n)}function t(){for(var e=Array.prototype.concat(f(document),g(document,"IMG"),g(document,"INPUT")),n=[],t=new Object,a=0;a<e.length;a++){t=r(e[a]);var l=Object.getOwnPropertyNames(t);(l.length>=2&&"0"==l[0]||l.length>2)&&n.push(t)}return n}function a(e){var n={},t=e.nodeValue,a=0;if(n.element=e.parentElement,n["lang-default"]=t.replace(/<!--(.*)-->.*/,""),t&&(t=e.nodeValue.match(/<!--\{\w+\}[\s\S]*?-->/gi)),t&&t.length>0)for(;a<t.length;a++){var l=t[a].match(/\{([^\ ]*)\}/)[0];l=l.replace(/\{([^\ ]*)\}/g,"$1"),n["lang-"+l]=t[a].replace(/<!--\{\w+\}(.*)-->/g,"$1")}return e.parentElement.innerHTML=n["lang-default"],n}function l(e){var n=0,t=[],a=e.outerHTML,l=a.match(/src=\"(.*?)\"/),r=a.match(/alt=\"(.*?)\"/),o=a.match(/title=\"(.*?)\"/),u=a.match(/placeholder=\"(.*?)\"/),i=a.match(/value=\"(.*?)\"/),g=function(t,l,r){var o={},u=new RegExp(r+'.(\\w+).\\".*?\\"',"g"),i=new RegExp(r+"(.*?)="),g=new RegExp(r+'(.*?)=\\"(.*?)\\"');if(o.element=e,o.default=2===t.length?t[1]:"",(t=a.match(u))&&t.length>0)for(n=0;n<t.length;n++)o[t[n].match(i,"$1")[1]]=t[n].match(g,"$1")[2],o.type=l;return o};return l&&t.push(g(l,"src","data-lang-")),r&&t.push(g(r,"alt","alt-")),o&&t.push(g(o,"title","title-")),u&&t.push(g(u,"placeholder","placeholder-")),i&&t.push(g(i,"value","value-")),t}function r(e,n){if(n=n||{},e.parentElement&&"TITLE"===e.parentElement.tagName)return a(e);if("IMG"===e.tagName&&1===e.nodeType)return l(e);if("INPUT"===e.tagName&&1===e.nodeType)return l(e);var t="lang-default",o=e.nodeValue,i=/^\{\w+\}/;8===e.nodeType&&i.test(o)&&(t=o.match(i)[0],t="lang-"+(t?t.replace(/\{([^\ ]*)\}/g,"$1"):""),o=o.replace(i,""),""!==u(o)&&(n[t]=o)),""===u(o)||n["lang-default"]||(n[t]=o,n.element=e);var g=e.nextSibling;return g&&1!==g.nodeType&&r(g,n),n}function u(e){return""+(null==e?"":(e+"").replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"").replace(/[\r\n]+/g,""))}function i(e,n){var t=n||location.search,a={};if(-1!=t.indexOf("?"))for(var l=t.substr(1).split("&"),r=0,o=l.length;r<o;r++){var u=l[r].split("=");a[u[0]]=u[1]&&decodeURIComponent(u[1])}return e?a[e]:a}function g(e,n){for(var t=0,a=[],l=e.getElementsByTagName(n);t<l.length;t++)a.push(l[t]);return a}var c=function(n,a){if(n=n||{},i("lang"))n.lang=i("lang");else{var l=e("minii18n_lang");l?n.lang=l:void 0==n.lang&&(n.lang="default")}this.lang_name=n.lang,this.callback=a||function(){},this.langs=t()||[],"default"!==this.lang_name&&this.setLang(n.lang)};c.prototype={setLang:function(e,t){var a=t||this.langs,l="";this.lang_name=e;for(var r=0;r<a.length;r++)a[r]["lang-"+e]||a[r][e]?(l="TITLE"===a[r].element.tagName?"innerHTML":"IMG"===a[r].element.tagName?a[r].type:"INPUT"===a[r].element.tagName?a[r].type:"nodeValue",a[r].element[l]=a[r]["lang-"+e]||a[r][e]):this.setLang(e,a[r]);n("minii18n_lang",e)},getLang:function(){return this.lang_name}};var f=window.NodeFilter?function(e){var n,t,a=[];for(t=document.createTreeWalker(e,NodeFilter.SHOW_TEXT,null,null);n=t.nextNode();)"SCRIPT"!==n.parentElement.tagName&&"STYLE"!==n.parentElement.tagName&&"CODE"!==n.parentElement.tagName&&""!==u(n.nodeValue)&&a.push(n);return a}:function(e){switch(e.nodeType){case 3:return[e];case 1:case 9:var n,t=e.childNodes,a=[];if("SCRIPT"!==e.tagName&&"STYLE"!==e.tagName&&"CODE"!==e.tagName&&""!==u(o.nodeValue)){for(n=0;n<t.length;n++)f(t[n])&&a.push(f(t[n]));return Array.prototype.concat.apply([],a)}}};return c});

